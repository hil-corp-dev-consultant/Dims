@*

Module              : CMS - DIMS Solution.
DocumentName        : SalesHurdleList.cshtml
Project Name        : Dealer Information Management System (DIMS).
Client Name         : HIL :: CK BIRLA GROUP.
Dev. Organisation   : Envision Enterprise Solutions Pvt. Ltd.
Team                : ASD.
Description         : This Doc is for used for Creating Target.
Developer Name      : Manikanta
Change Log          : NA.

*@

@*@using LabelNames = DIMS.Content.Resource_Files.CreateTargetFC;*@
@{
    Layout = null;



    DIMS.Models.UserProperties UP = (DIMS.Models.UserProperties)Session["UP"];

    string SessionSITEDETAIL_CODE = UP.SITEDETAIL_CODE;
    string SessionUserCode = UP.UserCode;
    string SessionUserName = UP.UserName;
    string SessionCOMPANYDETAIL_CODE = UP.COMPANYDETAIL_CODE;
    string SessionUserType = UP.UserType;
    string SessionUserTypeID = UP.UserTypeCode;    
    
    
}

<style type="text/css">
    button {
        cursor: pointer;
    }

    .tab-pane {
        padding-top: 20px;
    }

    ul li {
        cursor: pointer;
    }


    .SlectBox {
        padding: 5px 8px;
        width: 153px;
    }

    #SalesHurdleDiv li.active a {
        background-color: #d2401a;
        color: white;
    }

    .green {
        color: darkgreen;
        font-weight: bold;
        font-size: medium;
    }

    .red {
        color: darkred;
        font-weight: bold;
        font-size: medium;
    }

    .blue {
        color: #320d8e;
        font-weight: bold;
        font-size: medium;
    }

    .purple {
        color: #bc16c7;
        font-weight: bold;
        font-size: medium;
    }
    .Holiday {
    background-color:#e5e7e9
    }
    /*.PopupTable {
        margin-left: 150px;
    }

    .PopupTable tr, td {
        border: 2px solid black;
    }

   .PopupTable td {
        width: 150px;
    }
    .Background {
   background-color:#e5e7e9
    }*/
</style>

<input type="text" id="UserCode" value="@SessionUserCode" style="display: none;" />

<section class="content-header" style="padding: 1px 15px 0;">
    <h2>Sales Huddles</h2>
    <ol class="breadcrumb">
        <li><a href ng-click="go('home')"><i class="fa fa-dashboard"></i>Home</a></li>
        <li>Sales Process Management</li>
        <li class="active">Sales Huddles</li>
    </ol>
    <nav style="padding: 1px 10px 1px 10px;">
        <div class="row">
            <div class="col-sm-11" id="IconsNavBar" style="display: none">
                <a href ng-click="go('SalesHurdleApproval')">
                    <i class="fa fa-file-o fa-4" title="Add New"></i>
                </a>
            </div>
        </div>
    </nav>
</section>

<div  class="CustomHeight_Section" style="overflow: auto;">
<section style="padding:0 15px 90px;">
    <div class="row">
    <div class="col-md-12">
        <div class="box box-primary" style="background: white none repeat scroll 0 0; padding: 4px;" id="SalesHurdleDiv">
          <div class="box-body">
            <form role="form" class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-2 control-label">Select Month<span class="Mandatory">*</span></label>
                    <div class="col-sm-2">
                        <input type="text" class="form-control Date" id="Month" readonly="readonly" placeholder="Select Month" />
                    </div>
                    <label class="col-sm-2 control-label">Zone</label>
                    <div class="col-sm-2">
                        <select id="Zone" class="form-control">
                            <option value="select">select</option>
                        </select>
                        @* <input type="text" class="form-control gray" id="ZonalName" disabled="disabled" />
                            <input type="text" class="form-control gray" id="ZonalCode" disabled="disabled" style="display: none;" />*@
                    </div>
                    <label class="col-sm-2 control-label">State</label>
                    <div class="col-sm-2">
                        <select id="State" class="form-control">
                            <option value="select">select</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                <div class="col-sm-12">
                <div class="pull-right" style="margin-left: 15px;">
                    <button type="button" class="btn btn-info navbar-btn" ng-click="GetSalesHuddles()" style="background-color: #d2401a;border:1px solid #d2401a;">
                        Submit
                    </button>
                </div>
                </div>
                </div>
            </form>
            <ul class="nav nav-tabs">
                <li class="" id="DailyTab"><a data-toggle="tab" id="DailyTabA" onclick="DailyClick()">Daily</a></li>
                <li class="" id="WeeklyTab"><a data-toggle="tab" id="WeeklyTabA" onclick="WeeklyClick()">Weekly</a></li>
                <li class="" id="MonthlyTab"><a data-toggle="tab" id="MonthlyTabA" onclick="MonthlyClick()">Monthly</a></li>
            </ul>
            <div class="tab-content">
                <div id="DailySales" class="tab-pane">
                    @*<table id="MarketMap" class="table tablecss ListTable">*@
                    <table id="SalesHurdlesListDaily" class="table tablecss ListTable" style="width: 100%">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Role / Designation</th>
                                <th>1</th>
                                <th>2</th>
                                <th>3</th>
                                <th>4</th>
                                <th>5</th>

                                <th>6</th>
                                <th>7</th>
                                <th>8</th>
                                <th>9</th>
                                <th>10</th>

                                <th>11</th>
                                <th>12</th>
                                <th>13</th>
                                <th>14</th>
                                <th>15</th>

                                <th>16</th>
                                <th>17</th>
                                <th>18</th>
                                <th>19</th>
                                <th>20</th>

                                <th>21</th>
                                <th>22</th>
                                <th>23</th>
                                <th>24</th>
                                <th>25</th>

                                <th>26</th>
                                <th>27</th>
                                <th>28</th>
                                <th>29</th>
                                <th>30</th>
                                <th>31</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                        <tfoot style="display: none;">
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Role/Designation</th>

                                <th>1</th>
                                <th>2</th>
                                <th>3</th>
                                <th>4</th>
                                <th>5</th>

                                <th>6</th>
                                <th>7</th>
                                <th>8</th>
                                <th>9</th>
                                <th>10</th>

                                <th>11</th>
                                <th>12</th>
                                <th>13</th>
                                <th>14</th>
                                <th>15</th>

                                <th>16</th>
                                <th>17</th>
                                <th>18</th>
                                <th>19</th>
                                <th>20</th>

                                <th>21</th>
                                <th>22</th>
                                <th>23</th>
                                <th>24</th>
                                <th>25</th>

                                <th>26</th>
                                <th>27</th>
                                <th>28</th>
                                <th>29</th>
                                <th>30</th>
                                <th>31</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div id="WeeklySales" class="tab-pane">
                    <table id="SalesHurdlesListWeekly" class="table tablecss ListTable" style="width: 100%">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Role / Designation</th>
                                <th>1</th>
                                <th>2</th>
                                <th>3</th>
                                <th>4</th>
                                <th>5</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                        <tfoot>
                            <tr style="display: none;">
                                <th>Name</th>
                                <th>Role / Designation</th>
                                <th>1</th>
                                <th>2</th>
                                <th>3</th>
                                <th>4</th>
                                <th>5</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div id="MonthlySales" class="tab-pane">
                    <table id="SalesHurdlesListMonthly" class="table tablecss ListTable" style="width: 100%">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Role / Designation</th>
                                <th>1</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                        <tfoot>
                            <tr style="display: none;">
                                <th>ID</th>
                                <th>Name</th>
                                <th>Role / Designation</th>
                                <th>1</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            </div>
        </div>
    </div>
    </div>
</section>
</div>

<script type="text/javascript">
    $(window).resize(function () {
        $('.CustomHeight_Section').height($(window).height() - 170);
    });
    $('.CustomHeight_Section').height($(window).trigger('resize'));

    $(document).ready(function () {
        $('#SalesHurdlesListDaily').DataTable({
            "fnRowCallback": function (nRow, aData) {

                $(nRow).children().each(function (index, td) {

                    if ($(td).html() === "Y") {
                        $(td).addClass('green');
                    } else if ($(td).html() === "N") {
                        $(td).addClass('red');
                    }
                    else if ($(this).text() == "S") {
                        $(this).addClass('purple');
                    }
                    else if ($(this).text() == "H") {
                        $(this).addClass('blue');
                    }
                    else if ($(this).text() == "M") {
                        $(this).html("");
                        $(this).addClass('Holiday');
                    }
                });
                return nRow;
            }
        });

        $('#SalesHurdlesListWeekly').DataTable({
            "fnRowCallback": function (nRow, aData) {

                $(nRow).children().each(function (index, td) {

                    if ($(td).html() === "Y") {
                        $(td).addClass('green');
                    } else if ($(td).html() === "N") {
                        $(td).addClass('red');
                    }
                });
                return nRow;
            }
        });

        $('#SalesHurdlesListMonthly').DataTable({
            "fnRowCallback": function (nRow, aData) {

                $(nRow).children().each(function (index, td) {

                    if ($(td).html() === "Y") {
                        $(td).addClass('green');
                    } else if ($(td).html() === "N") {
                        $(td).addClass('red');
                    }
                });
                return nRow;
            }
        });


        //GetServerDateTime();
        DailyClick();
        $("#DailyTab").addClass("active");

        if (userrole_sales == "CST" || userrole_sales == "CST1" || userrole_sales == "ADMIN") {

            $("#IconsNavBar").css({ "display": "block" });
        }
        // if (userrole_sales == "CST" || userrole_sales == "NSH" || userrole_sales == "COO" || userrole_sales == "ADMIN") {

        //     bindZones();
        // }

        // if (userrole_sales == "ZH" || userrole_sales == "ZSC" )
        //{
        //    alert(UserZoneName_sales);
        //    alert(UserZoneCode_sales);
        //    $("#ZonalName").append($("<option></option>").val(UserZoneCode_sales).html(UserZoneName_sales));
        //    $("#ZonalName").attr('disabled', 'disabled');
        //     //bindZones(UserZoneCode);

        //     $.ajax({
        //         url: '../SFDC/BindStates',
        //         type: 'post',
        //         async: 'false',
        //         datatype: 'JSON',
        //         data: {
        //             stateName: UserZoneCode_sales
        //         },
        //         success: function (data) {
        //             alert(data);
        //             var s = JSON.parse(data);
        //             $("#StateName").empty();
        //             $("#StateName").append($("<option></option>").val("").html("--select--"));
        //             for (var j = 0; j < s.length; j++) {

        //                 $("#StateName").append($("<option></option>").val(s[j]["STATE_DESC"]).html(s[j]["STATE_DESC"]));
        //             }
        //         }
        //     })
        // }
        //var date = new Date().getUTCMonth();
        //var year = new Date().getFullYear();

        //var mon = date + "/" + year;
        //$("#MonthYear").val("MAY-2016");

        $("#Month").datepicker({
            format: "MM-yyyy",
            viewMode: "months",
            minViewMode: "months",
            autoclose: true
        });
    });

    function DailyClick() {
        try {
            //$('#DailyPopup').modal('show');

            $("#DailySales").show();
            $("#WeeklySales").hide();
            $("#MonthlySales").hide();

        }
        catch (e) {
            alert("Error DailyClick : " + e);
        }
    }
    function WeeklyClick() {
        try {
            //$('#WeeklyPopup').modal('show');

            $("#DailySales").hide();
            $("#WeeklySales").show();
            $("#MonthlySales").hide();
        }
        catch (e) {
            alert("Error WeeklySales : " + e);
        }


    }
    function MonthlyClick() {
        try {
            //$('#MonthlyPopup').modal('show');

            $("#DailySales").hide();
            $("#WeeklySales").hide();
            $("#MonthlySales").show();
        }
        catch (e) {
            alert("Error WeeklySales : " + e);
        }
    }

    function bindZones() {
        $.ajax({
            url: '../SFDC/BindZones',
            async: false,
            method: 'POST',
            success: function (data) {
                var r = JSON.parse(data);
                $("#ZonalName").empty();
                $("#ZonalName").append($("<option></option>").val("").html("--select--"));
                for (var j = 0; j < r.length; j++) {
                    $("#ZonalName").append($("<option></option>").val(r[j]["ZONE_CODE"]).html(r[j]["ZONE_NAME"]));
                }
            }
        })
    }

    $("#ZonalName").change(function () {
        var stateName = $("#ZonalName").val()

        $.ajax({
            url: '../SFDC/BindStates',
            type: 'post',
            async: 'false',
            datatype: 'JSON',
            data: { stateName: stateName },
            success: function (data) {
                var s = JSON.parse(data);
                $("#StateName").empty();
                $("#StateName").append($("<option></option>").val("").html("--select--"));
                for (var j = 0; j < s.length; j++) {
                    $("#StateName").append($("<option></option>").val(s[j]["STATE_CODE"]).html(s[j]["STATE_DESC"]));
                }
            }
        })
    });

    //function GetServerDateTime() {
    //    $.ajax({
    //        url: '../../Home/getServerDateTime_Sales',
    //        type: 'GET',
    //        success: function (response) {
    //            var Month = "";
    //            var result = JSON.parse(response.tabledata);
    //            if (result == "") {
    //            }
    //            else {
    //                Month = result.split('/')[1] + "-" + result.split('/')[2];
    //                $("#Month").datepicker('setEndDate', result);
    //                $("#Month").val(Month);
    //            }
    //        }
    //    });
    //}

</script>
